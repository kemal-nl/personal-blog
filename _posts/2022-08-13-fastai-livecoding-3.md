---
keywords: fastai
description: My personal notes for the fast.ai live coding session 3.
title: Live Coding Session 3
toc: true 
badges: false
comments: true
categories: [live-coding]
nb_path: _notebooks/2022-08-13-fastai-livecoding-3.ipynb
layout: notebook
---

<!--
#################################################
### THIS FILE WAS AUTOGENERATED! DO NOT EDIT! ###
#################################################
# file to edit: _notebooks/2022-08-13-fastai-livecoding-3.ipynb
-->

<div class="container" id="notebook-container">
        
<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h1 id="Relevant-Material">Relevant Material<a class="anchor-link" href="#Relevant-Material"> </a></h1><p><a href="https://forums.fast.ai/t/live-coding-3/96707">Live Coding Session 3 Forum</a>
{% include youtube.html content='<a href="https://youtu.be/B6BQiIgiEks">https://youtu.be/B6BQiIgiEks</a>' %}</p>

</div>
</div>
</div>
<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>{% include note.html content='These are my personal notes. They are not meant to be a comprehensive summary, but rather the things I wanted to note down for myself to refer to at a later point.' %}</p>

</div>
</div>
</div>
<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h1 id="At-the-end-of-this-lesson-you-will-have:">At the end of this lesson you will have:<a class="anchor-link" href="#At-the-end-of-this-lesson-you-will-have:"> </a></h1><ul>
<li>...</li>
</ul>

</div>
</div>
</div>
<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h1 id="Notes">Notes<a class="anchor-link" href="#Notes"> </a></h1>
</div>
</div>
</div>
<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h2 id="Why-not-use-virtual-environment?">Why not use virtual environment?<a class="anchor-link" href="#Why-not-use-virtual-environment?"> </a></h2><ul>
<li>Virtual environments are separate folders with separate installations of Python and Python libraries. Good for keeping different projects separated with different sets of dependencies/versions. Jeremy prefers to have all his projects be compatible with each other and therefore has a baseline environment which he uses for all his projects.</li>
<li>He manages this by:<ul>
<li>Using a single base environment</li>
<li>Keeping libraries up to date</li>
<li>Having good tests that can tell if some new release has broken something</li>
</ul>
</li>
<li>Exception: when Jeremy wants to check if something works with a specific version of Python.</li>
<li>How to uninstall mamba: <code>rm -rf mamba forge</code></li>
</ul>

</div>
</div>
</div>
<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h2 id="PATH-and-virtual-environment">PATH and virtual environment<a class="anchor-link" href="#PATH-and-virtual-environment"> </a></h2><ul>
<li>Terminals use something called <code>PATH</code>, which is a list of places from which to run programs.</li>
<li>View <code>PATH</code> variable: <code>echo $PATH</code></li>
<li>mamba directory looks very similar to Linux root directory</li>
<li>.bashrc sets <code>PATH</code> variable</li>
<li>Create a new environment called <code>tmp</code>: <code>mamba create -n tmp 'python&lt;3.10' fastcore</code></li>
<li>Activate new environment: <code>mamba activate tmp</code></li>
<li>Deactivate: <code>mamba deactivate</code></li>
</ul>

</div>
</div>
</div>
<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h2 id="Paperspace">Paperspace<a class="anchor-link" href="#Paperspace"> </a></h2><ul>
<li>Most of the time you won't (or shouldn't) be using a GPU. However when you do, it should feel as much as possible as if you are using your own computer and shouldn't cost you much (if any) money &rarr; Paperspace </li>
<li>With Gradient Notebooks you can get a free GPU server which behaves a lot like what we have worked with so far</li>
</ul>

</div>
</div>
</div>
<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h2 id="Debugging-in-Jupyter">Debugging in Jupyter<a class="anchor-link" href="#Debugging-in-Jupyter"> </a></h2><ul>
<li>Start debugger: <code>%% debug</code></li>
<li>Starts a REPL, some useful commands: h=help, s=step into, n=next, c=continue, l=list, q=quit</li>
<li>Note: <code>breakpoint()</code> does not work in Jupyter due to some unresolved bug</li>
<li>You can use pdb to step into library code as well</li>
</ul>

</div>
</div>
</div>
<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h2 id="How-to-ensure-libraries-we-install-are-not-deleted-when-Paperspace-is-restarted">How to ensure libraries we install are not deleted when Paperspace is restarted<a class="anchor-link" href="#How-to-ensure-libraries-we-install-are-not-deleted-when-Paperspace-is-restarted"> </a></h2><ul>
<li>Since Paperspace does not offer a real server, whatever you install, will not be there the next time you start it up</li>
<li>Paperspace does have persistent storage however. There is a folder called <code>storage</code> in the root directory. Whatever you store in there, will be there next time you start up the Paperspace 'server'.<ul>
<li>View all drives and how much space is available: <code>df -h</code></li>
</ul>
</li>
<li>In contrast to conda/mamba, pip allows for us to install libraries in our home directory (<code>cd ~</code>) rather than in the root directory (<code>cd /</code>). We would want to do this if we do not have access to the root directory or we cannot save in the root directory. This is done by: <code>pip install --user [library]</code><ul>
<li>For data science libraries, usually it is better to use conda/mamba. For example if you want to install PyTorch it is better to use conda/mamba, as it takes care of the dependencies for you. If you pip install it on the other hand, you will need to install CUDA SDK separately for instance. </li>
<li>However, pip is fine for installing libraries without those types of dependencies. For most regular Python libraries, pip is fine. </li>
</ul>
</li>
<li>When installing via pip with the <code>--user</code> flag, a new folder called <code>.local</code> is created in the home directory and the package will be installed in there.</li>
<li>We want the .local directory to persist across sessions:<ol>
<li>We move it to <code>root/storage</code>: <code>mv .local /storage</code> </li>
<li>But Python needs it in the home directory. For this we create a 'symbolic link' aka 'symlink' (basically a shortcut): <code>ln -s /storage/.local</code></li>
<li><code>.local</code> will now persist across sessions, however symlink will be removed. Paperspace runs a file every time on startup called <code>pre-run.sh</code>. We can use this file to create the symlink every time a notebook is started.</li>
</ol>
</li>
</ul>

</div>
</div>
</div>
<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h2 id="git-folder-on-Paperspace">git folder on Paperspace<a class="anchor-link" href="#git-folder-on-Paperspace"> </a></h2><ul>
<li>Jeremy has a git folder in <code>/notebooks</code> (sym linked, source directory is inside <code>/storage</code>). This is used to git clone repositories into it. (Needs to end up in <code>pre-run.sh</code>)</li>
</ul>
<h2 id="SSH-key-on-paperspace">SSH key on paperspace<a class="anchor-link" href="#SSH-key-on-paperspace"> </a></h2><ul>
<li>There are 2 options:<ol>
<li>Use pre-existing SSH key (same as my local machine)<ul>
<li>Jeremy's preference, because he doesn't want to do too much 'SSH key admin'</li>
<li>How to:<ul>
<li>Generate ssh key with <code>ssh-keygen</code></li>
<li>Move to <code>/storage</code>: <code>mv .ssh /storage</code></li>
<li>Sym link (needs to end up in <code>pre-run.sh</code>): <code>ln -s /storage/.ssh</code></li>
<li>Edit contents of <code>id_rsa</code> and <code>is_rsa.pub</code> (not sure if latter is needed).</li>
<li>Check if permissions match that of default ssh key. If not: <ul>
<li><code>chmod ag-rw id_rsa</code></li>
<li><code>chmod ag-w id_rsa.pub</code></li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
<li>Generate new one for Paperspace</li>
</ol>
</li>
<li>Check by ssh into github: <code>ssh git@github.com</code> &rarr;<ul>
<li>Returned text should mention your github username</li>
</ul>
</li>
</ul>

</div>
</div>
</div>
</div>
 

